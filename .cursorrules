# Cursor Rules

## üîÑ Session Continuity

**‚ö†Ô∏è MANDATORY at conversation start (unless resuming from summary):**
1. Run `git --no-pager log --stat -5`
2. Run `python cursor-scripts/cursor_usage.py reminder --once`
3. Summarize recent work
4. Ask: "Resume from where we left off, or start something new?"

**Skip asking if:**
- User says "resume", "continue" ‚Üí Just resume
- User gives specific task ‚Üí Do the task

**Self-check:** If you didn't run steps 1-2 at start, acknowledge the skip.

---

### üìù Conversation Export

**Trigger (immediate, no confirmation):**
- `/e` - Export conversation

**Run:**
```bash
./cursor-scripts/export-chat.sh
```

**Confirm:** "Exported to `cursor-chats/CURSOR-CLI_YYYY-MM-DD.md`"

---

### üö´ Workspace Boundaries

**DO NOT access files outside workspace without explicit permission.**

Includes: `~/.zshrc`, `~/.config/*`, `~/.ssh/*`, any external path

**Workflow for external files:**
1. Ask: "I need to edit `~/.zshrc`. Can you copy it to `./temp/`?"
2. User copies to `./temp/`
3. AI edits `./temp/<filename>`
4. User copies back, confirms "done"
5. AI cleans up: `rm -rf ./temp/* ./temp/.* 2>/dev/null; true`

**Exception:** Only if user explicitly instructs (e.g., "read my ~/.zshrc")

---

### üîç Environment Detection

**Test:** Run `docker ps`
- ‚úÖ Success ‚Üí **Cursor CLI** (terminal agent)
- ‚ùå Fails ‚Üí **Cursor IDE** (editor agent)

| Feature | CLI | IDE |
|---------|-----|-----|
| Docker Access | ‚úÖ | ‚ùå |
| Web Search | `cursor-scripts/web_search.py` | `WebFetch` |
| Shell Commands | Full | Limited |

**CLI:** Run commands directly, read results
**IDE:** Provide commands for user to run, wait for confirmation, then read results

**Web Search (CLI only):**
```bash
python cursor-scripts/web_search.py "query"
```
- Uses Gemini with Google Search grounding
- Auto-logs to `cursor-web-search/CURSOR-WEB_YYYY-DD-MM.md`

---

### üîí Sensitive Files

**Never read unless explicitly debugging auth:**
- `.env` - API credentials

---

### üìÑ Citing Sources

| Can Cite | Cannot Cite |
|----------|-------------|
| `.py`, `.js`, `.ipynb` (code) | `.cursorrules` |
| `.md`, `.txt` (docs) | `.env`, `.gitignore` |
| `README.md` | `.cursor/` files |

---

## üìö Reference

### Tool Paths

```bash
# Usage tracking
python cursor-scripts/cursor_usage.py import   # Import CSV
python cursor-scripts/cursor_usage.py report   # Usage report
python cursor-scripts/cursor_usage.py quota    # Quota status
python cursor-scripts/cursor_usage.py budget   # Daily budget
python cursor-scripts/cursor_usage.py alerts   # Threshold alerts
python cursor-scripts/cursor_usage.py reminder # CSV reminder

# Chat export
./cursor-scripts/export-chat.sh

# Web search
python cursor-scripts/web_search.py "query"

# Update Cursor CLI
./cursor-scripts/update-cursor.sh
```

### Git Commits

**‚ö†Ô∏è BEFORE committing, follow `COMMIT-CONVENTIONS.md`:**
- Use tags: `add:`, `update:`, `fix:`, `refactor:`, `style:`, `revert:`
- Format: `<tag>: <description>`
- Date format in filenames: `YYYY-DD-MM`

### Documentation Files

- `COMMIT-CONVENTIONS.md` - Git commit message format
- `cursor-scripts/` - CLI tools and utilities
- `cursor-chats/` - Conversation logs
- `cursor-web-search/` - Web search logs

### Status

‚úÖ Usage Tracking: Ready
‚úÖ Chat Export: Ready
‚úÖ Web Search: Requires `GEMINI_API_KEY` in `.env`
